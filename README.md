# Khu Phaen (‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô)

Offline Task Management System - ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Offline ‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏û‡∏∂‡πà‡∏á internet ‡∏Å‡πá‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ

> **Khu Phaen** (‡∏Ç‡∏∏‡∏ô‡πÅ‡∏ú‡∏ô) - ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ï‡∏≤‡∏°‡∏ß‡∏£‡∏£‡∏ì‡∏Ñ‡∏î‡∏µ‡πÑ‡∏ó‡∏¢ ‡∏´‡∏°‡∏≤‡∏¢‡∏ñ‡∏∂‡∏á‡∏ú‡∏π‡πâ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÄ‡∏ä‡∏µ‡πà‡∏¢‡∏ß‡∏ä‡∏≤‡∏ç ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏ö‡∏£‡∏¥‡∏´‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡πÑ‡∏î‡πâ‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏°‡∏µ‡∏õ‡∏£‡∏∞‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡∏†‡∏≤‡∏û

## ‚ú® Features

- ‚úÖ **Task Management** - ‡πÄ‡∏û‡∏¥‡πà‡∏° ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç ‡∏•‡∏ö‡∏á‡∏≤‡∏ô
- üë• **Team Management** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏ó‡∏µ‡∏°‡πÅ‡∏•‡∏∞‡∏°‡∏≠‡∏ö‡∏´‡∏°‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- üìÅ **Project Management** - ‡∏à‡∏±‡∏î‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏á‡∏≤‡∏ô‡∏ï‡∏≤‡∏°‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ
- üìÖ **Calendar View** - ‡∏î‡∏π‡∏á‡∏≤‡∏ô‡πÉ‡∏ô‡∏£‡∏π‡∏õ‡πÅ‡∏ö‡∏ö‡∏õ‡∏è‡∏¥‡∏ó‡∏¥‡∏ô
- üéØ **Kanban Board** - ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö‡∏•‡∏≤‡∏Å-‡∏ß‡∏≤‡∏á (Drag & Drop)
- üìä **Task Statistics** - ‡∏™‡∏ñ‡∏¥‡∏ï‡∏¥‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô
- üì§ **Export/Import** - ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å/‡∏ô‡∏≥‡πÄ‡∏Ç‡πâ‡∏≤ CSV ‡πÅ‡∏•‡∏∞ PDF
- üíæ **Local Storage** - ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏ô browser (IndexedDB)
- üåô **Dark Mode** - ‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏•‡∏≤‡∏á‡∏Ñ‡∏∑‡∏ô
- üîÑ **Real-time Sync** - ‡∏ã‡∏¥‡∏á‡∏Ñ‡πå‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• real-time ‡∏ú‡πà‡∏≤‡∏ô WebSocket (‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô Sync Server)

## üèóÔ∏è Project Structure

```
.
‚îú‚îÄ‚îÄ src/                    # SvelteKit Frontend
‚îú‚îÄ‚îÄ sync-server/            # Rust WebSocket Sync Server
‚îú‚îÄ‚îÄ wasm-compress/          # WASM: LZ4 Compression
‚îú‚îÄ‚îÄ wasm-crdt/              # WASM: CRDT for collaborative editing
‚îú‚îÄ‚îÄ wasm-search/            # WASM: Full-text search
‚îú‚îÄ‚îÄ static/                 # Static assets
‚îî‚îÄ‚îÄ build/                  # Build output (static files)
```

## üöÄ Getting Started

### Prerequisites

- [Node.js](https://nodejs.org/) 18+ 
- [Rust](https://rustup.rs/) (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ build sync-server ‡∏´‡∏£‡∏∑‡∏≠ WASM)

### 1. Install Dependencies

```sh
npm install
```

### 2. Run Development Server

```sh
# Run frontend dev server
npm run dev

# ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏õ‡∏¥‡∏î browser ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
npm run dev -- --open
```

Frontend ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà `http://localhost:5173`

### 3. Run Sync Server (Optional - ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Real-time Sync)

‡πÉ‡∏ô terminal ‡∏≠‡∏µ‡∏Å‡∏≠‡∏±‡∏ô:

```sh
cd sync-server
cargo run --release
```

Sync Server ‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏ó‡∏µ‡πà `http://localhost:3001`

### 4. Build WASM Modules (Optional)

‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£ build WASM ‡πÄ‡∏≠‡∏á:

```sh
# Build wasm-compress
cd wasm-compress
cargo build --release --target wasm32-unknown-unknown

# Build wasm-crdt
cd ../wasm-crdt
cargo build --release --target wasm32-unknown-unknown

# Build wasm-search
cd ../wasm-search
cargo build --release --target wasm32-unknown-unknown
```

## üß™ Testing

### ‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏±‡∏ô‡πÄ‡∏ó‡∏™

- ‡∏•‡∏î‡πÇ‡∏≠‡∏Å‡∏≤‡∏™‡∏û‡∏±‡∏á‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ‡πÇ‡∏Ñ‡πâ‡∏î ‡πÇ‡∏î‡∏¢‡πÄ‡∏â‡∏û‡∏≤‡∏∞ flow ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡∏á‡∏≤‡∏ô, filter, ‡πÅ‡∏•‡∏∞ bulk actions
- ‡∏ä‡πà‡∏ß‡∏¢‡∏à‡∏±‡∏ö regression ‡πÄ‡∏£‡πá‡∏ß ‡∏Å‡πà‡∏≠‡∏ô‡∏Ç‡∏∂‡πâ‡∏ô production
- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ refactor ‡πÑ‡∏î‡πâ‡∏°‡∏±‡πà‡∏ô‡πÉ‡∏à‡∏Ç‡∏∂‡πâ‡∏ô ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏°‡∏µ‡∏ä‡∏∏‡∏î‡πÄ‡∏ó‡∏™‡∏Ñ‡∏≠‡∏¢‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô behavior ‡πÄ‡∏î‡∏¥‡∏°

### ‡πÄ‡∏ó‡∏™‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á (‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÜ)

- ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Å‡∏ï‡πå‡∏ô‡∏µ‡πâ‡πÉ‡∏ä‡πâ `Vitest` ‡πÄ‡∏õ‡πá‡∏ô test runner
- ‡∏ä‡∏∏‡∏î `unit` ‡πÉ‡∏ä‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö logic test ‡πÅ‡∏•‡∏∞ component/UI test
- ‡∏£‡∏±‡∏ô‡πÅ‡∏•‡πâ‡∏ß‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÇ‡∏´‡∏•‡∏î‡πÑ‡∏ü‡∏•‡πå `*.test.ts` ‡πÉ‡∏ô `src/` ‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏¢‡∏á‡∏≤‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏Ñ‡∏™‡πÑ‡∏´‡∏ô‡∏ú‡πà‡∏≤‡∏ô/‡πÑ‡∏°‡πà‡∏ú‡πà‡∏≤‡∏ô
- ‡∏ñ‡πâ‡∏≤‡πÉ‡∏ä‡πâ watch mode ‡πÄ‡∏ó‡∏™‡∏à‡∏∞ rerun ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÅ‡∏Å‡πâ‡πÑ‡∏ü‡∏•‡πå

### Run all tests

```sh
npm test
```

### Run DB unit tests (logic-focused)

```sh
npx vitest run src/lib/db.unit.test.ts
```

### ‡∏ó‡∏≥‡πÑ‡∏° DB tests ‡∏ô‡∏µ‡πâ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

- ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô regression ‡πÉ‡∏ô flow ‡∏´‡∏•‡∏±‡∏Å‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡∏á‡∏≤‡∏ô ‡πÄ‡∏ä‡πà‡∏ô ‡πÄ‡∏û‡∏¥‡πà‡∏°/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö/‡∏Å‡∏£‡∏≠‡∏á‡∏á‡∏≤‡∏ô
- ‡∏•‡∏î‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏™‡∏µ‡πà‡∏¢‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏µ‡πâ‡∏¢‡∏ô‡∏ï‡∏≠‡∏ô import/export/merge/sync
- ‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏ä‡πá‡∏Ñ‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏° migration ‡πÅ‡∏•‡∏∞ lifecycle ‡∏Ç‡∏≠‡∏á‡∏ê‡∏≤‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢‡∏Ç‡∏∂‡πâ‡∏ô

### DB tests ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á (‡∏™‡∏±‡πâ‡∏ô‡πÜ)

- ‡πÉ‡∏ä‡πâ `vitest` ‡∏£‡∏±‡∏ô unit test ‡∏ó‡∏µ‡πà `src/lib/db.unit.test.ts`
- mock ‡∏ä‡∏±‡πâ‡∏ô SQLite/Storage ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ó‡∏™‡∏ï‡πå logic ‡πÉ‡∏ô `src/lib/db.ts` ‡πÇ‡∏î‡∏¢‡∏ï‡∏£‡∏á
- ‡∏ï‡∏£‡∏ß‡∏à‡∏ó‡∏±‡πâ‡∏á CRUD, stats, project/assignee, CSV import/export, merge ‡πÅ‡∏•‡∏∞ binary export

### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô DB test ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÜ ‡∏á‡πà‡∏≤‡∏¢‡πÜ

1. ‡πÄ‡∏õ‡∏¥‡∏î‡πÑ‡∏ü‡∏•‡πå `src/lib/db.unit.test.ts`
2. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÄ‡∏Ñ‡∏™‡∏î‡πâ‡∏ß‡∏¢ pattern `describe -> it -> expect`
3. Arrange: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏î‡πâ‡∏ß‡∏¢ `addProject / addAssignee / addTask`
4. Act: ‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏≤‡∏Å‡πÄ‡∏ó‡∏™‡∏ï‡πå (‡πÄ‡∏ä‡πà‡∏ô `updateTask`, `importFromCSV`)
5. Assert: ‡πÄ‡∏ä‡πá‡∏Ñ‡∏ú‡∏•‡∏î‡πâ‡∏ß‡∏¢ `getTaskById`, `getTasks`, `getStats` ‡πÅ‡∏•‡πâ‡∏ß `expect(...)`

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏±‡πâ‡∏ô:

```ts
it('updates task status', async () => {
  const id = await addTask({
    title: 'T1',
    project: 'Core',
    duration_minutes: 10,
    date: '2026-02-12',
    status: 'todo',
    category: '‡∏≠‡∏∑‡πà‡∏ô‡πÜ',
    notes: '',
    assignee_id: null,
    sprint_id: null,
    is_archived: false
  });

  await updateTask(id, { status: 'done' });
  const task = await getTaskById(id);
  expect(task?.status).toBe('done');
});
```

### Run unit/component tests only

```sh
npx vitest run --project unit
```

### Run specific test file

```sh
npx vitest run --project unit src/lib/components/TaskForm.test.ts
npx vitest run --project unit src/lib/components/TableView.test.ts
```

### Run in watch mode (unit/component)

```sh
npx vitest --project unit
```

### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡πÄ‡∏ó‡∏™‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÜ‡∏á‡πà‡∏≤‡∏¢‡πÜ

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏ó‡∏™‡∏Å‡∏±‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á ‡πÄ‡∏ä‡πà‡∏ô `src/lib/components/TaskForm.test.ts`
2. ‡∏ï‡∏±‡πâ‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Ñ‡∏™‡πÉ‡∏´‡πâ‡∏ö‡∏≠‡∏Å‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏° ‡πÄ‡∏ä‡πà‡∏ô `it('shows edit mode values', ...)`
3. ‡∏¢‡∏∂‡∏î‡∏´‡∏•‡∏±‡∏Å "‡πÄ‡∏ó‡∏™‡∏û‡∏§‡∏ï‡∏¥‡∏Å‡∏£‡∏£‡∏°‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏´‡πá‡∏ô" ‡∏Å‡πà‡∏≠‡∏ô‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏†‡∏≤‡∏¢‡πÉ‡∏ô
4. ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏à‡∏≤‡∏Å happy path 1 ‡πÄ‡∏Ñ‡∏™ ‡πÅ‡∏•‡πâ‡∏ß‡∏Ñ‡πà‡∏≠‡∏¢‡πÄ‡∏û‡∏¥‡πà‡∏° edge case

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÇ‡∏Ñ‡∏£‡∏á‡∏™‡∏±‡πâ‡∏ô‡πÜ:

```ts
// @vitest-environment jsdom
import { render, fireEvent } from '@testing-library/svelte';
import { describe, it, expect } from 'vitest';
import MyComponent from './MyComponent.svelte';

describe('MyComponent', () => {
	it('updates UI after click', async () => {
		const { getByRole, getByText } = render(MyComponent);
		await fireEvent.click(getByRole('button', { name: 'Save' }));
		expect(getByText('Saved')).toBeTruthy();
	});
});
```

### ‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥ workflow ‡∏™‡∏±‡πâ‡∏ô‡πÜ

1. ‡∏ï‡∏≠‡∏ô‡∏û‡∏±‡∏í‡∏ô‡∏≤ component ‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏¥‡∏î watch mode: `npx vitest --project unit`
2. ‡∏Å‡πà‡∏≠‡∏ô commit ‡πÉ‡∏´‡πâ‡∏£‡∏±‡∏ô‡πÄ‡∏ï‡πá‡∏°: `npm test`
3. ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡πÄ‡∏ó‡∏™‡∏û‡∏±‡∏á ‡πÉ‡∏´‡πâ‡πÅ‡∏Å‡πâ‡∏à‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏Å‡πà‡∏≠‡∏ô push

## üìö Storybook (UI Documentation)

### ‡∏ó‡∏≥‡πÑ‡∏° Storybook ‡∏™‡∏≥‡∏Ñ‡∏±‡∏ç

- ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏µ‡∏°‡πÄ‡∏´‡πá‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏ï‡∏≤‡πÅ‡∏•‡∏∞ behavior ‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞ component ‡πÑ‡∏î‡πâ‡πÇ‡∏î‡∏¢‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÑ‡∏•‡πà‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏±‡πâ‡∏á‡πÅ‡∏≠‡∏õ
- ‡∏•‡∏î regression ‡∏î‡πâ‡∏≤‡∏ô UI ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏ó‡∏µ‡∏¢‡∏ö state ‡∏ï‡πà‡∏≤‡∏á‡πÜ ‡∏Ç‡∏≠‡∏á component ‡πÑ‡∏î‡πâ‡∏ä‡∏±‡∏î‡πÄ‡∏à‡∏ô
- ‡πÉ‡∏ä‡πâ‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£‡∏Å‡∏•‡∏≤‡∏á‡∏Ç‡∏≠‡∏á props/args ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö dev ‡πÅ‡∏•‡∏∞ reviewer

### Storybook ‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏¢‡∏±‡∏á‡πÑ‡∏á (‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÜ)

- Storybook ‡∏à‡∏∞‡∏£‡∏ß‡∏ö‡∏£‡∏ß‡∏°‡πÑ‡∏ü‡∏•‡πå `*.stories.svelte` ‡πÅ‡∏•‡πâ‡∏ß render component ‡πÄ‡∏õ‡πá‡∏ô‡πÅ‡∏ï‡πà‡∏•‡∏∞ state
- ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏õ‡∏£‡∏±‡∏ö props ‡∏ú‡πà‡∏≤‡∏ô controls ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå‡∏ó‡∏±‡∏ô‡∏ó‡∏µ
- ‡∏´‡∏ô‡πâ‡∏≤‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£ overview ‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà `src/storybook/UI-Overview.mdx`

### Run Storybook (Local UI docs)

```sh
npm run storybook
```

‡πÄ‡∏õ‡∏¥‡∏î‡∏ó‡∏µ‡πà `http://localhost:6006`

### Build Storybook (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö deploy ‡πÄ‡∏≠‡∏Å‡∏™‡∏≤‡∏£)

```sh
npm run build-storybook
```

‡πÑ‡∏ü‡∏•‡πå output ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà `storybook-static/`

### ‡∏ß‡∏¥‡∏ò‡∏µ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô Story ‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡πá‡∏ß‡πÜ‡∏á‡πà‡∏≤‡∏¢‡πÜ

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏Ç‡πâ‡∏≤‡∏á component ‡πÄ‡∏ä‡πà‡∏ô `src/lib/components/MyComponent.stories.svelte`
2. ‡πÉ‡∏™‡πà `defineMeta` ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏Å‡∏≥‡∏´‡∏ô‡∏î `title`, `component`, ‡πÅ‡∏•‡∏∞ `args` ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ï‡πâ‡∏ô
3. ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢ 2 story: `Default` ‡πÅ‡∏•‡∏∞ state ‡∏û‡∏¥‡πÄ‡∏®‡∏© (‡πÄ‡∏ä‡πà‡∏ô Empty/Loading/Error)
4. ‡πÄ‡∏õ‡∏¥‡∏î `npm run storybook` ‡πÅ‡∏•‡πâ‡∏ß‡∏õ‡∏£‡∏±‡∏ö props ‡∏ú‡πà‡∏≤‡∏ô controls ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Å UI ‡∏ó‡∏±‡∏ô‡∏ó‡∏µ

‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏±‡πâ‡∏ô‡πÜ:

```svelte
<script module lang="ts">
	import { defineMeta } from '@storybook/addon-svelte-csf';
	import MyComponent from './MyComponent.svelte';

	const { Story } = defineMeta({
		title: 'Components/MyComponent',
		component: MyComponent,
		tags: ['autodocs'],
		args: { label: 'Hello' }
	});
</script>

<Story name="Default" />
<Story name="Empty" args={{ label: '' }} />
```

## üè≠ Build for Production

### Build Frontend

```sh
npm run build
```

‡πÑ‡∏ü‡∏•‡πå static ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå `build/`

### Build Sync Server Binary

```sh
cd sync-server
cargo build --release
# Binary ‡∏à‡∏∞‡∏≠‡∏¢‡∏π‡πà‡∏ó‡∏µ‡πà target/release/sync-server
```

## üê≥ Docker / Podman Deployment (Sync Server Only)

> **Frontend** ‡πÉ‡∏ä‡πâ Static Files ‡∏à‡∏≤‡∏Å `npm run build` ‡πÅ‡∏•‡πâ‡∏ß‡∏ô‡∏≥‡πÑ‡∏õ host ‡∏ö‡∏ô nginx/apache ‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢
> 
> **Sync Server** ‡∏£‡∏±‡∏ô‡∏ú‡πà‡∏≤‡∏ô Docker ‡∏´‡∏£‡∏∑‡∏≠ Podman ‡∏ï‡∏≤‡∏°‡∏î‡πâ‡∏≤‡∏ô‡∏•‡πà‡∏≤‡∏á

### Option 1: ‡πÉ‡∏ä‡πâ Pre-built Image ‡∏à‡∏≤‡∏Å GHCR (‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥)

```sh
podman run -d \
  --name khu-phaen-sync \
  --memory=100m \
  -p 3002:3001 \
  ghcr.io/watchakorn-18k/khun-phaen-tracker-offline/sync-server:latest
```

‡∏´‡∏£‡∏∑‡∏≠‡πÉ‡∏ä‡πâ Docker:

```sh
docker run -d \
  --name khu-phaen-sync \
  --memory=100m \
  -p 3002:3001 \
  ghcr.io/watchakorn-18k/khun-phaen-tracker-offline/sync-server:latest
```

‡∏´‡∏•‡∏±‡∏á‡∏£‡∏±‡∏ô‡πÄ‡∏™‡∏£‡πá‡∏à‡∏à‡∏∞‡πÄ‡∏Ç‡πâ‡∏≤‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà:

- REST API: `http://localhost:3002`
- WebSocket: `ws://localhost:3002/ws`

### Option 2: Docker Compose

```yaml
version: '3.8'

services:
  khu-phaen-sync:
    image: ghcr.io/watchakorn-18k/khun-phaen-tracker-offline/sync-server:latest
    ports:
      - "3002:3001"
    environment:
      - PORT=3001
      - RUST_LOG=info
    restart: unless-stopped
```

‡∏£‡∏±‡∏ô‡∏î‡πâ‡∏ß‡∏¢:

```sh
docker-compose up -d
```

### Option 3: Build Image ‡πÄ‡∏≠‡∏á

```sh
cd sync-server

# Build image
docker build -t khu-phaen-sync .

# Run (host 3002 -> container 3001)
docker run -d \
  --name khu-phaen-sync \
  --memory=100m \
  -p 3002:3001 \
  khu-phaen-sync
```

## üåê Render (HTTPS / WSS)

‡∏ñ‡πâ‡∏≤‡∏à‡∏∞ deploy ‡∏ö‡∏ô Render ‡πÉ‡∏´‡πâ‡πÉ‡∏ä‡πâ URL ‡πÅ‡∏ö‡∏ö `https` ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô ‡πÄ‡∏ä‡πà‡∏ô:

```txt
https://khu-phaen-sync.onrender.com
```

‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô:

1. ‡∏™‡∏£‡πâ‡∏≤‡∏á Render Web Service ‡∏à‡∏≤‡∏Å image `ghcr.io/watchakorn-18k/khun-phaen-tracker-offline/sync-server:latest`
2. ‡πÉ‡∏´‡πâ service bind ‡∏Å‡∏±‡∏ö `PORT` (Render ‡∏à‡∏∞ inject ‡∏Ñ‡πà‡∏≤‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥)
3. ‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡πÅ‡∏≠‡∏õ ‡πÉ‡∏™‡πà Server URL ‡πÄ‡∏õ‡πá‡∏ô `https://<your-service>.onrender.com`
4. ‡∏ï‡∏±‡∏ß‡πÅ‡∏≠‡∏õ‡∏à‡∏∞‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÄ‡∏õ‡πá‡∏ô `wss://<your-service>.onrender.com/ws` ‡πÉ‡∏´‡πâ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡πÄ‡∏°‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ WebSocket

## ‚öôÔ∏è Configuration

### Environment Variables

#### Frontend (Build Time)

| Variable | Default | Description |
|----------|---------|-------------|
| `PUBLIC_SYNC_SERVER_URL` | `http://localhost:3001` | Base URL ‡∏Ç‡∏≠‡∏á Sync Server (`http://` ‡∏´‡∏£‡∏∑‡∏≠ `https://`) |

#### Sync Server (Runtime)

| Variable | Default | Description |
|----------|---------|-------------|
| `PORT` | `3001` | Port ‡∏ó‡∏µ‡πà server ‡∏à‡∏∞‡∏£‡∏±‡∏ô |
| `RUST_LOG` | `info` | Log level (error, warn, info, debug, trace) |

## üì° Sync Server API

### REST Endpoints

| Method | Endpoint | Description |
|--------|----------|-------------|
| GET | `/` | Server info |
| GET | `/health` | Health check |
| POST | `/api/rooms` | ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏´‡πâ‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà |
| GET | `/api/rooms/:room_code` | ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏´‡πâ‡∏≠‡∏á |

### WebSocket Endpoint

```
WS /ws
```

‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡πÑ‡∏î‡πâ‡∏ó‡∏µ‡πà [sync-server/README.md](sync-server/README.md)

## üìÅ Project Details

### Tech Stack

- **Frontend**: SvelteKit 5 + TypeScript + Tailwind CSS 4
- **State Management**: Svelte Stores
- **Database**: IndexedDB (via idb library)
- **Sync Server**: Rust + Axum + WebSocket
- **WASM**: Rust (compression, CRDT, search)
- **Calendar**: FullCalendar
- **PDF Export**: jsPDF
- **Icons**: Lucide Svelte

### Build Targets

- **Frontend**: Static files (adapter-static)
- **Base Path**: `/khun-phaen-tracker-offline` (‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö GitHub Pages)

## üìÑ License

MIT

---

<p align="center">
  ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏î‡πâ‡∏ß‡∏¢ ‚ù§Ô∏è ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏á‡∏≤‡∏ô‡πÅ‡∏ö‡∏ö Offline-First
</p>
